<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯»å®å¤§å†’é™©</title>
    <style>
        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background: linear-gradient(135deg, #8B4513 0%, #CD853F 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            color: #2C1810;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(139, 69, 19, 0.2) 0%, transparent 20%),
                radial-gradient(circle at 80% 70%, rgba(210, 105, 30, 0.2) 0%, transparent 20%);
        }
        
        body::before {
            content: "ğŸ—ºï¸";
            position: absolute;
            top: 10%;
            left: 10%;
            font-size: 2em;
            opacity: 0.3;
        }
        
        body::after {
            content: "ğŸ’°";
            position: absolute;
            bottom: 10%;
            right: 10%;
            font-size: 2em;
            opacity: 0.3;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.85);
            border-radius: 20px;
            padding: 30px;
            border: 3px solid #8B4513;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            color: #2C1810;
            position: relative;
            overflow: hidden;
        }
        
        .container::before {
            content: "âš”ï¸";
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.5em;
            opacity: 0.1;
        }
        
        h1 {
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 30px;
            color: #8B4513;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .progress-container {
            background: rgba(139, 69, 19, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #8B4513;
        }
        
        .progress-bar {
            height: 20px;
            background: rgba(139, 69, 19, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
            border: 1px solid #8B4513;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8B4513, #CD853F);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .log-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 20px;
            height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            border: 1px solid #8B4513;
            position: relative;
        }
        
        .log-entry {
            margin: 5px 0;
            padding: 8px;
            border-radius: 5px;
            animation: fadeIn 0.5s ease;
            border-left: 3px solid;
        }
        
        .success {
            background: rgba(46, 204, 113, 0.2);
            color: #27ae60;
            border-left-color: #27ae60;
        }
        
        .error {
            background: rgba(231, 76, 60, 0.2);
            color: #c0392b;
            border-left-color: #c0392b;
        }
        
        .action-btn {
            display: block;
            width: 200px;
            margin: 20px auto;
            padding: 15px 30px;
            font-size: 1.2em;
            background: linear-gradient(45deg, #8B4513, #CD853F);
            border: none;
            border-radius: 25px;
            color: white;
            cursor: pointer;
            transition: transform 0.3s ease;
            font-family: inherit;
        }
        
        .action-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .treasure-animation {
            font-size: 3em;
            text-align: center;
            margin: 20px 0;
            transition: all 0.5s ease;
        }
        
        /* æ–°å¢åˆ›æ„å…ƒç´  */
        .weather-display {
            text-align: center;
            margin: 10px 0;
            font-size: 1.2em;
            color: #8B4513;
        }
        
        .adventure-stats {
            display: flex;
            justify-content: space-around;
            margin: 15px 0;
            font-size: 0.9em;
            color: #8B4513;
        }
        
        .random-fact {
            text-align: center;
            font-style: italic;
            margin: 10px 0;
            color: #2C1810;
            font-size: 0.9em;
            opacity: 0.7;
        }
        
        .treasure-map {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2em;
            opacity: 0;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ—ºï¸ å¯»å®å¤§å†’é™©</h1>
        
        <!-- å¤©æ°”æ˜¾ç¤º -->
        <div class="weather-display" id="weatherDisplay">ğŸŒ¤ï¸ æ™´æœ—çš„å¤©æ°”</div>
        
        <!-- å†’é™©ç»Ÿè®¡ -->
        <div class="adventure-stats">
            <span>ğŸ—ºï¸ æ­¥æ•°: <span id="stepCount">0</span></span>
            <span>â° æ—¶é—´: <span id="timeDisplay">00:00</span></span>
            <span>â­ å‹‡æ°”: <span id="courage">100</span></span>
        </div>
        
        <!-- éšæœºè¶£é—» -->
        <div class="random-fact" id="randomFact">ç‚¹å‡»å¼€å§‹æŒ‰é’®å¼€å§‹å†’é™©ï¼</div>
        
        <div class="progress-container">
            <h3>å¯»å®è¿›åº¦</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div id="progressText">å‡†å¤‡å¼€å§‹å¯»å®...</div>
        </div>
        
        <div class="treasure-animation" id="treasureIcon">ğŸ§­</div>
        
        <div class="log-container" id="logContainer">
            <div class="log-entry">ç‚¹å‡»å¼€å§‹æŒ‰é’®å¼€å§‹å¯»å®ä¹‹æ—…ï¼</div>
        </div>
        
        <button class="action-btn" id="startBtn" onclick="startTreasureHunt()">å¼€å§‹å¯»å®</button>
    </div>

    <script>
        // å†’é™©ç»Ÿè®¡å˜é‡
        let stepCount = 0;
        let startTime = 0;
        let courage = 100;
        let gameTimer = null;

        // éšæœºè¶£é—»åº“
        const randomFacts = [
            "ä½ çŸ¥é“å—ï¼Ÿå¤ä»£å®è—é€šå¸¸è¢«è—åœ¨æœ€å±é™©çš„åœ°æ–¹ï¼",
            "ä¼ è¯´ä¸­ï¼Œåªæœ‰å‹‡æ•¢çš„äººæ‰èƒ½æ‰¾åˆ°çœŸæ­£çš„å®è—ã€‚",
            "å¤è€çš„å¯»å®åœ°å›¾ä¸Šé€šå¸¸æœ‰ç¥ç§˜çš„ç¬¦å·æ ‡è®°ã€‚",
            "æ®è¯´å®è—å‘¨å›´ä¼šæœ‰å¥‡æ€ªçš„åŠ¨ç‰©å®ˆæŠ¤ã€‚",
            "å¯»å®è€…å¸¸è¯´ï¼š'æœ€å±é™©çš„åœ°æ–¹å°±æ˜¯æœ€å®‰å…¨çš„åœ°æ–¹ã€‚'",
            "å¤ä»£æ–‡æ˜ç›¸ä¿¡å®è—ä¼šä¿æŠ¤çœŸæ­£çš„å¯»å®è€…ã€‚",
            "å¯»å®éœ€è¦æ™ºæ…§ã€å‹‡æ°”å’Œä¸€ç‚¹ç‚¹è¿æ°”ï¼",
            "æ®è¯´å®è—ä¼šå‘å…‰ï¼ŒæŒ‡å¼•å‹‡æ•¢çš„å¯»å®è€…ã€‚",
            "å¤ä»£å®è—é€šå¸¸æœ‰ä¸‰é“å…³å¡æ‰èƒ½åˆ°è¾¾ã€‚",
            "çœŸæ­£çš„å®è—ä¸åœ¨äºé‡‘å¸ï¼Œè€Œåœ¨äºå¯»å®çš„è¿‡ç¨‹ã€‚"
        ];

        // å¤©æ°”å˜åŒ–
        const weathers = [
            "ğŸŒ¤ï¸ æ™´æœ—çš„å¤©æ°”",
            "â›… å¤šäº‘çš„å¤©æ°”", 
            "ğŸŒ¦ï¸ å°é›¨çš„å¤©æ°”",
            "â›ˆï¸ é›·é›¨çš„å¤©æ°”",
            "ğŸŒªï¸ é£æš´çš„å¤©æ°”",
            "â˜€ï¸ ç‚çƒ­çš„å¤©æ°”",
            "ğŸŒ™ æœˆé»‘é£é«˜çš„å¤œæ™š"
        ];

        class TreasureMap {
            static getInitialClue() {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        updateRandomFact();
                        updateWeather();
                        resolve("ğŸ—ºï¸ åœ¨å¤è€çš„å›¾ä¹¦é¦†é‡Œæ‰¾åˆ°äº†ç¬¬ä¸€ä¸ªçº¿ç´¢...");
                    }, 1000);
                });
            }

            static decodeAncientScript(clue) {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        if (!clue) {
                            reject("âŒ æ²¡æœ‰çº¿ç´¢å¯ä»¥è§£ç !");
                        }
                        updateRandomFact();
                        updateStep();
                        resolve("ğŸ“œ è§£ç æˆåŠŸ!å®è—åœ¨ä¸€åº§å¤è€çš„ç¥åº™ä¸­...");
                    }, 1500);
                });
            }

            static navigateForest(location) {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        const random = Math.random();
                        if (random < 0.3) {
                            courage = Math.max(0, courage - 20);
                            updateCourage();
                            reject("ğŸ•·ï¸ ç³Ÿç³•!é‡åˆ°äº†æ¯’èœ˜è››!å‹‡æ°”-20");
                        }
                        updateRandomFact();
                        updateStep();
                        resolve("ğŸŒ² æˆåŠŸç©¿è¶Šäº†ç¥ç§˜æ£®æ—ï¼Œåˆ°è¾¾äº†ç¥åº™å…¥å£...");
                    }, 1200);
                });
            }

            static solveRiddle(location) {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        const random = Math.random();
                        if (random < 0.4) {
                            courage = Math.max(0, courage - 15);
                            updateCourage();
                            reject("ğŸ§© è°œé¢˜å¤ªéš¾ï¼Œè§£ä¸å¼€!å‹‡æ°”-15");
                        }
                        updateRandomFact();
                        updateStep();
                        resolve("ğŸ§  èªæ˜çš„è§£å¼€äº†å¤è€çš„è°œé¢˜...");
                    }, 1800);
                });
            }

            static searchTemple(location) {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        const random = Math.random();
                        if (random < 0.5) {
                            courage = Math.max(0, courage - 25);
                            updateCourage();
                            reject("âš”ï¸ ç³Ÿç³•!é‡åˆ°äº†ç¥åº™å®ˆå«!å‹‡æ°”-25");
                        }
                        updateRandomFact();
                        updateStep();
                        resolve("ğŸ—ï¸ æ‰¾åˆ°äº†ä¸€ä¸ªç¥ç§˜çš„ç®±å­...");
                    }, 2000);
                });
            }

            static openTreasureBox() {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        updateRandomFact();
                        updateStep();
                        resolve("ğŸ’° æ­å–œ!ä½ æ‰¾åˆ°äº†ä¼ è¯´ä¸­çš„å®è—!");
                    }, 1000);
                });
            }

            static receiveBlessing() {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        courage = Math.min(100, courage + 50); // è·å¾—ç¥ç¦ï¼Œå‹‡æ°”+50
                        updateCourage();
                        updateRandomFact();
                        updateStep();
                        resolve("âœ¨ å®è—æ•£å‘å‡ºç¥ç§˜å…‰èŠ’ï¼Œä½ è·å¾—äº†æ°¸ä¹…çš„ç¥ç¦!å‹‡æ°”+50");
                    }, 1000);
                });
            }
        }

        let logContainer = document.getElementById('logContainer');
        let progressFill = document.getElementById('progressFill');
        let progressText = document.getElementById('progressText');
        let startBtn = document.getElementById('startBtn');
        let treasureIcon = document.getElementById('treasureIcon');

        function addLog(message, type = 'success') {
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        function updateProgress(percentage, text) {
            progressFill.style.width = percentage + '%';
            progressText.textContent = text;
        }

        // æ›´æ–°å†’é™©ç»Ÿè®¡
        function updateStep() {
            stepCount++;
            document.getElementById('stepCount').textContent = stepCount;
        }

        function updateCourage() {
            document.getElementById('courage').textContent = courage;
            // å¦‚æœå‹‡æ°”å½’é›¶ï¼Œæ¸¸æˆå¤±è´¥
            if (courage <= 0) {
                addLog("ğŸ’€ å‹‡æ°”è€—å°½ï¼Œå†’é™©å¤±è´¥ï¼", 'error');
                updateProgress(0, 'å‹‡æ°”è€—å°½');
                treasureIcon.textContent = 'ğŸ’€';
                startBtn.disabled = false;
            }
        }

        function updateRandomFact() {
            const fact = randomFacts[Math.floor(Math.random() * randomFacts.length)];
            document.getElementById('randomFact').textContent = fact;
        }

        function updateWeather() {
            const weather = weathers[Math.floor(Math.random() * weathers.length)];
            document.getElementById('weatherDisplay').textContent = weather;
        }

        function updateTime() {
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60).toString().padStart(2, '0');
            const seconds = (elapsed % 60).toString().padStart(2, '0');
            document.getElementById('timeDisplay').textContent = `${minutes}:${seconds}`;
        }

        async function startTreasureHunt() {
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            stepCount = 0;
            courage = 100;
            startTime = Date.now();
            
            // æ¸…ç©ºè®¡æ—¶å™¨
            if (gameTimer) clearInterval(gameTimer);
            
            // å¼€å§‹æ—¶é—´æ›´æ–°
            gameTimer = setInterval(updateTime, 1000);
            
            startBtn.disabled = true;
            document.getElementById('stepCount').textContent = '0';
            document.getElementById('courage').textContent = '100';
            document.getElementById('timeDisplay').textContent = '00:00';
            
            addLog("ğŸ¯ å¼€å§‹å¯»å®ä¹‹æ—…!", 'success');
            updateProgress(0, 'å‡†å¤‡å‡ºå‘...');
            treasureIcon.textContent = 'ğŸ§­';

            try {
                // æ­¥éª¤1
                updateProgress(10, 'æ­£åœ¨å‰å¾€å›¾ä¹¦é¦†...');
                treasureIcon.textContent = 'ğŸ“š';
                const clue = await TreasureMap.getInitialClue();
                addLog(clue, 'success');
                updateProgress(20, 'è·å¾—åˆå§‹çº¿ç´¢');

                // æ­¥éª¤2
                updateProgress(25, 'è§£ç å¤ä»£æ–‡å­—...');
                treasureIcon.textContent = 'ğŸ“œ';
                const decoded = await TreasureMap.decodeAncientScript(clue);
                addLog(decoded, 'success');
                updateProgress(40, 'æˆåŠŸè§£ç ');

                // æ­¥éª¤3
                updateProgress(45, 'ç©¿è¶Šç¥ç§˜æ£®æ—...');
                treasureIcon.textContent = 'ğŸŒ²';
                const forestResult = await TreasureMap.navigateForest(decoded);
                addLog(forestResult, 'success');
                updateProgress(60, 'ç©¿è¶Šæ£®æ—æˆåŠŸ');

                // æ­¥éª¤4
                updateProgress(65, 'è§£å¼€å¤è€è°œé¢˜...');
                treasureIcon.textContent = 'ğŸ§©';
                const riddleResult = await TreasureMap.solveRiddle(forestResult);
                addLog(riddleResult, 'success');
                updateProgress(80, 'è°œé¢˜å·²è§£å¼€');

                // æ­¥éª¤5
                updateProgress(85, 'æœç´¢ç¥åº™...');
                treasureIcon.textContent = 'ğŸ›ï¸';
                const box = await TreasureMap.searchTemple(riddleResult);
                addLog(box, 'success');
                updateProgress(90, 'æ‰¾åˆ°ç¥ç§˜ç®±å­');

                // æ­¥éª¤6
                updateProgress(95, 'æ‰“å¼€å®ç®±...');
                treasureIcon.textContent = 'ğŸ—ï¸';
                const treasure = await TreasureMap.openTreasureBox();
                addLog(treasure, 'success');
                updateProgress(98, 'å®è—å³å°†åˆ°æ‰‹');

                // æ­¥éª¤7
                const blessing = await TreasureMap.receiveBlessing();
                addLog(blessing, 'success');
                updateProgress(100, 'å¯»å®å®Œæˆï¼è·å¾—ç¥ç¦ï¼');
                treasureIcon.textContent = 'ğŸ’°';

                addLog("ğŸ‰ å¯»å®æˆåŠŸå®Œæˆï¼æ­å–œå‘è´¢ï¼", 'success');

            } catch (error) {
                addLog(`ğŸ’€ ä»»åŠ¡å¤±è´¥: ${error}`, 'error');
                updateProgress(0, 'ä»»åŠ¡å¤±è´¥');
                treasureIcon.textContent = 'ğŸ’€';
            } finally {
                startBtn.disabled = false;
                if (gameTimer) clearInterval(gameTimer);
            }
        }

        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºåˆå§‹éšæœºè¶£é—»
        window.onload = function() {
            updateRandomFact();
        };
    </script>
</body>
</html>
