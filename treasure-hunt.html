<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>寻宝大冒险</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            color: white;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .progress-container {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .progress-bar {
            height: 20px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .log-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
        }
        
        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-radius: 5px;
            animation: fadeIn 0.5s ease;
        }
        
        .success {
            background: rgba(46, 204, 113, 0.3);
            color: #2ecc71;
        }
        
        .error {
            background: rgba(231, 76, 60, 0.3);
            color: #e74c3c;
        }
        
        .action-btn {
            display: block;
            width: 200px;
            margin: 20px auto;
            padding: 15px 30px;
            font-size: 1.2em;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border: none;
            border-radius: 25px;
            color: white;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .action-btn:hover {
            transform: scale(1.05);
        }
        
        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .treasure-animation {
            animation: pulse 1s infinite;
            font-size: 3em;
            text-align: center;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🗺️ 寻宝大冒险</h1>
        
        <div class="progress-container">
            <h3>寻宝进度</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div id="progressText">准备开始寻宝...</div>
        </div>
        
        <div class="treasure-animation" id="treasureIcon">🧭</div>
        
        <div class="log-container" id="logContainer">
            <div class="log-entry">点击开始按钮开始寻宝之旅！</div>
        </div>
        
        <button class="action-btn" id="startBtn" onclick="startTreasureHunt()">开始寻宝</button>
    </div>

    <script>
        class TreasureMap {
            static getInitialClue() {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        resolve("🗺️ 在古老的图书馆里找到了第一个线索...");
                    }, 1000);
                });
            }

            static decodeAncientScript(clue) {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        if (!clue) {
                            reject("❌ 没有线索可以解码!");
                        }
                        resolve("📜 解码成功!宝藏在一座古老的神庙中...");
                    }, 1500);
                });
            }

            static navigateForest(location) {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        const random = Math.random();
                        if (random < 0.3) {
                            reject("🕷️ 糟糕!遇到了毒蜘蛛!");
                        }
                        resolve("🌲 成功穿越了神秘森林，到达了神庙入口...");
                    }, 1200);
                });
            }

            static solveRiddle(location) {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        const random = Math.random();
                        if (random < 0.4) {
                            reject("🧩 谜题太难，解不开!");
                        }
                        resolve("🧠 聪明的解开了古老的谜题...");
                    }, 1800);
                });
            }

            static searchTemple(location) {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        const random = Math.random();
                        if (random < 0.5) {
                            reject("⚔️ 糟糕!遇到了神庙守卫!");
                        }
                        resolve("🗝️ 找到了一个神秘的箱子...");
                    }, 2000);
                });
            }

            static openTreasureBox() {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        resolve("💰 恭喜!你找到了传说中的宝藏!");
                    }, 1000);
                });
            }

            static receiveBlessing() {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        resolve("✨ 宝藏散发出神秘光芒，你获得了永久的祝福!");
                    }, 1000);
                });
            }
        }

        let logContainer = document.getElementById('logContainer');
        let progressFill = document.getElementById('progressFill');
        let progressText = document.getElementById('progressText');
        let startBtn = document.getElementById('startBtn');
        let treasureIcon = document.getElementById('treasureIcon');

        function addLog(message, type = 'success') {
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        function updateProgress(percentage, text) {
            progressFill.style.width = percentage + '%';
            progressText.textContent = text;
        }

        async function startTreasureHunt() {
            startBtn.disabled = true;
            addLog("🎯 开始寻宝之旅!", 'success');
            updateProgress(0, '准备出发...');
            treasureIcon.textContent = '🧭';

            try {
                // 步骤1
                updateProgress(10, '正在前往图书馆...');
                treasureIcon.textContent = '📚';
                const clue = await TreasureMap.getInitialClue();
                addLog(clue, 'success');
                updateProgress(20, '获得初始线索');

                // 步骤2
                updateProgress(25, '解码古代文字...');
                treasureIcon.textContent = '📜';
                const decoded = await TreasureMap.decodeAncientScript(clue);
                addLog(decoded, 'success');
                updateProgress(40, '成功解码');

                // 步骤3
                updateProgress(45, '穿越神秘森林...');
                treasureIcon.textContent = '🌲';
                const forestResult = await TreasureMap.navigateForest(decoded);
                addLog(forestResult, 'success');
                updateProgress(60, '穿越森林成功');

                // 步骤4
                updateProgress(65, '解开古老谜题...');
                treasureIcon.textContent = '🧩';
                const riddleResult = await TreasureMap.solveRiddle(forestResult);
                addLog(riddleResult, 'success');
                updateProgress(80, '谜题已解开');

                // 步骤5
                updateProgress(85, '搜索神庙...');
                treasureIcon.textContent = '🏛️';
                const box = await TreasureMap.searchTemple(riddleResult);
                addLog(box, 'success');
                updateProgress(90, '找到神秘箱子');

                // 步骤6
                updateProgress(95, '打开宝箱...');
                treasureIcon.textContent = '🗝️';
                const treasure = await TreasureMap.openTreasureBox();
                addLog(treasure, 'success');
                updateProgress(98, '宝藏即将到手');

                // 步骤7
                const blessing = await TreasureMap.receiveBlessing();
                addLog(blessing, 'success');
                updateProgress(100, '寻宝完成！获得祝福！');
                treasureIcon.textContent = '💰';

                addLog("🎉 寻宝成功完成！恭喜发财！", 'success');

            } catch (error) {
                addLog(`💀 任务失败: ${error}`, 'error');
                updateProgress(0, '任务失败');
                treasureIcon.textContent = '💀';
            } finally {
                startBtn.disabled = false;
            }
        }
    </script>
</body>
</html>